(this.webpackJsonpchart_demo=this.webpackJsonpchart_demo||[]).push([[0],{110:function(e,t,a){e.exports=a(136)},115:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=(a(115),a(50)),l=a(51),m=a(67),s=a(66),u=a(75),g=a(11),d=a(45),p=a(15),f=a(36),h=a(32),b=a(23),v=a(52),E=(a(72),a(54)),y=a.n(E),N=["gas","temperature","battery","timbersaw"],w=["avggas","avgtemperature"],O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jwt";localStorage&&localStorage.setItem(t,JSON.stringify(e))},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jwt";return localStorage&&localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"jwt";localStorage&&localStorage.removeItem(e)},x=function(e){var t=e.dataset,a=e.category,o=Object(n.useRef)(!1),c=Object(n.useState)({chart:{id:"daily-chart",animations:{enabled:!0,easing:"linear",speed:1e3,dynamicAnimation:{enabled:!1}}},stroke:{curve:"smooth"},xaxis:{categories:[""]}}),i=Object(p.a)(c,2),l=i[0],m=i[1],s=Object(n.useState)([{name:"Gas",data:[]},{name:"Temperature",data:[]}]),u=Object(p.a)(s,2),g=u[0],d=u[1];return Object(n.useEffect)((function(){o.current?function(){if(""!==t.gas){var e=Object(b.a)({},l),n=e.xaxis.categories,r=[];n.push(a),n.length>10&&n.shift(),g.map((function(e){var a=e.data,n=e.name,o=Object(f.a)(a),c=n.toLowerCase();N.map((function(e){e===c&&function(e){var t=e.data,a=e.name,n=e.accumulator,r=e.dataset,o=a.toLowerCase();t.push(r[o]),t.length>10&&t.shift(),n.push({data:t,name:a})}({data:o,name:n,accumulator:r,dataset:t})}))})),m(e),d(r)}}():o.current=!0}),[a]),r.a.createElement(y.a,{options:l,series:g,type:"line"})},k=a(188),T=a(94),C=a(4),D=a(86),B=a.n(D),W=a(87),G=a.n(W),I=a(85),L=a.n(I),A=a(83),R=a.n(A),z=a(84),J=a.n(z),M=a(59),P=a.n(M),F=function(e){var t=e.title,a=e.content,n=e.footer,o=e.color,c=e.status,i=void 0!==c&&c,l=e.warning,m=void 0!==l&&l,s={"Nhi\u1ec7t \u0111\u1ed9":function(){return r.a.createElement(R.a,{style:{fontSize:40,color:"#fff"}})},"N\u1ed3ng \u0111\u1ed9 CO":function(){return r.a.createElement(J.a,{style:{fontSize:40,color:"#fff"}})},Pin:function(){return r.a.createElement(L.a,{style:{fontSize:40,color:"#fff"}})},"Tr\u1ed9m g\u1ed7":function(){return r.a.createElement(P.a,{style:{fontSize:40,color:"#fff"}})}};return r.a.createElement(T.a,{className:"card-container",elevation:4},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"card card-left"},r.a.createElement("div",{className:"card-left-icon",style:{background:o}},s[t]())),r.a.createElement("div",{className:"card card-right"},r.a.createElement("p",{className:"card-left-title"},t),r.a.createElement("p",{className:"card-left-content"},i?"1"===a?"Tr\u1ea1ng th\xe1i t\u1ed1t":"Tr\u1ea1ng th\xe1i x\u1ea5u":a||"0",{"Nhi\u1ec7t \u0111\u1ed9":" \xb0C","N\u1ed3ng \u0111\u1ed9 CO":" %",Pin:" %","Tr\u1ed9m g\u1ed7":""}[t]))),r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer-wrapper"},m?r.a.createElement(B.a,{style:{color:"#fb8c00"}}):r.a.createElement(G.a,{style:{color:"#43a047"}}),r.a.createElement("span",{className:"footer-content"},n))))},U=a(181),K=a(182),q=a(183),V=a(68),_=a(187),H=a(199),X=a(186),Y=a(185),$=a(184),Q=a(89),Z=a.n(Q),ee=a(88),te=a.n(ee),ae=function(e){var t=function(e){var t=e.startsWith("burn")?"\u0110ang ph\xe1t hi\u1ec7n ch\xe1y":"\u0110ang ph\xe1t hi\u1ec7n hi\u1ec7n t\u01b0\u1ee3ng tr\u1ed9m g\u1ed7";te()({title:"C\u1ea3nh b\xe1o t\u1ea1i Tr\u1ea1m "+e[e.length-1],subtitle:"Nguy hi\u1ec3m! Nguy hi\u1ec3m!",message:t,theme:"darkblue",native:!0})};for(var a in console.log("props auth",e.auth),e)"auth"!==a&&(e.auth?e[a]&&t(a):console.log("notification is turned off"));return r.a.createElement("div",null,"con cac")},ne=Object(U.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var re=Object(g.g)((function(e){var t=ne(),a=r.a.useState(!0),n=Object(p.a)(a,2),o=n[0],c=n[1];return console.log("auth...",o),r.a.createElement("div",{className:t.root},r.a.createElement(K.a,{position:"fixed"},r.a.createElement(q.a,null,r.a.createElement($.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(P.a,null)),r.a.createElement(V.a,{variant:"h6",className:t.title},"B\u1ea3ng th\xf4ng tin"),r.a.createElement(Y.a,null,r.a.createElement(X.a,{control:r.a.createElement(H.a,{checked:o,onChange:function(e){c(e.target.checked)},"aria-label":"login switch"}),label:o?"T\u1eaft th\xf4ng b\xe1o":"B\u1eadt th\xf4ng b\xe1o"})),r.a.createElement(_.a,{color:"inherit",onClick:function(){S(),e.history.push("/")}},r.a.createElement("span",{style:{marginTop:7,marginRight:7}},r.a.createElement(Z.a,null)),"\u0110\u0103ng xu\u1ea5t"))),r.a.createElement(ae,{auth:o,burnNode1:e.burnNode1,burnNode2:e.burnNode2,timbersawNode1:e.timbersawNode1,timbersawNode2:e.timbersawNode2}))})),oe=a(3),ce=a(200),ie=a(90),le=a.n(ie),me=function(e){var t=e.dataset,a=e.category,o=Object(n.useRef)(!1),c=Object(n.useState)({chart:{id:"avg-chart",animations:{enabled:!0,easing:"linear",speed:1e3,dynamicAnimation:{enabled:!1}}},stroke:{curve:"smooth"},xaxis:{categories:[""]}}),i=Object(p.a)(c,2),l=i[0],m=i[1],s=Object(n.useState)([{name:"avgGas",data:[]},{name:"avgTemperature",data:[]}]),u=Object(p.a)(s,2),g=u[0],d=u[1];return Object(n.useEffect)((function(){o.current?function(){var e,n=Object(b.a)({},l),r=[];n.xaxis.categories.length=0,(e=n.xaxis.categories).push.apply(e,Object(f.a)(a)),g.map((function(e){var a=e.name,n=(e.data,a.toLowerCase());return w.map((function(e){if(e===n){var o=Object(f.a)(t[a]);r.push({data:o,name:a})}return!0})),!0})),m(n),d(r)}():o.current=!0}),[a]),r.a.createElement(y.a,{options:l,series:g,type:"line"})},se=Object(U.a)({list:{width:250},fullList:{width:"auto"}}),ue={margin:"auto",marginBottom:15,marginTop:20,marginLeft:15,marginRight:25,maxWidth:430},ge=function(e){var t=e.data,a=e.title,n=e.category;return r.a.createElement(k.a,{container:!0,justify:"space-evenly",alignItems:"center"},t.map((function(e,t){return r.a.createElement(k.a,{key:t,item:!0,xs:10,sm:6,md:5},r.a.createElement("h4",{style:{textAlign:"center",paddingTop:20}},"".concat(a," ").concat(t+1)),r.a.createElement(T.a,{elevation:5,style:ue},r.a.createElement(me,{category:n,dataset:e})))})))};function de(e){var t,a=e.avgDailyData,n=e.ws,o=se(),c=r.a.useState({bottom:!1}),i=Object(p.a)(c,2),l=i[0],m=i[1],s=function(e,t){return function(a){("keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&(!function(){try{n.send("getAvgData")}catch(e){console.log(e)}}(),m(Object(b.a)({},l,Object(h.a)({},e,t))))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{className:"expand-button",onClick:s("bottom",!0),item:!0,xs:10,sm:6,md:5},r.a.createElement(le.a,{style:{fontSize:60}}),r.a.createElement("span",{style:{margin:"-15px 0 10px 0",fontWeight:"600"}},"Xem Gi\xe1 Tr\u1ecb Trung B\xecnh")),r.a.createElement("div",null),r.a.createElement(ce.a,{anchor:"bottom",open:l.bottom,onClose:s("bottom",!1)},(t="bottom",r.a.createElement("div",{className:Object(oe.a)(o.list,Object(h.a)({},o.fullList,"top"===t||"bottom"===t)),role:"presentation",onClick:s(t,!1),onKeyDown:s(t,!1)},r.a.createElement(ge,{data:a.data,category:a.category,title:"Bi\u1ec3u \u0111\u1ed3 gi\xe1 tr\u1ecb trung b\xecnh Tr\u1ea1m"})))))}var pe=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).timeout=250,n.connect=function(){var e,t=new WebSocket("ws://45.119.83.67:3300/"),a=Object(v.a)(n);t.onopen=function(){console.log("connected websocket main component"),n.setState({ws:t}),a.timeout=250,clearTimeout(e)},t.onclose=function(t){console.log("Socket is closed. Reconnect will be attempted in ".concat(Math.min(10,(a.timeout+a.timeout)/1e3)," second."),t.reason),a.timeout=a.timeout+a.timeout,e=setTimeout(n.check,Math.min(1e4,a.timeout))},t.onmessage=function(e){n.handleSetState(e.data)},t.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),t.close()}},n.check=function(){var e=n.state.ws;e&&e.readyState!==WebSocket.CLOSED||n.connect()},n.handleUpdateData=function(e){var t=e.type,a=e.valueNode1,n=e.valueNode2,r=e.category,o=e.newData,c=[];return""===a?c.push(Object(b.a)({},o[0]),Object(b.a)({},o[1],Object(h.a)({},t,n))):c.push(Object(b.a)({},o[0],Object(h.a)({},t,a)),Object(b.a)({},o[1])),[o=[].concat(c),r]},n.handleSetState=function(e){var t=JSON.parse(e),a=[{id:"Node1",avgTemperature:[],avgGas:[]},{id:"Node2",avgTemperature:[],avgGas:[]}],r=Object(f.a)(n.state.data),o="",c=[];null!==t[0]&&("getAvgData"!==t[0]?(t.map((function(e){var t=e.type,a=e.time,c=e.valueNode1,i=e.valueNode2;return N.map((function(e){if(e===t){var l=n.handleUpdateData({type:t,valueNode1:c,valueNode2:i,category:a,newData:r}),m=Object(p.a)(l,2);r=m[0],o=m[1]}return!0})),!0})),n.setState({category:o,data:r})):(console.log("data received: ",e),t[1].map((function(e){return c.length<t[1].length/2&&c.push(e.date),a.map((function(t){return w.map((function(a){if(a===e.type.toLowerCase()){var n="value".concat(t.id);t[e.type].push(e[n])}return!0})),!0})),!0})),n.setState({avgDailyData:{category:c,data:a}})))},n.logout=function(){S(),n.props.history.push("/")},n.handleTrigger=function(){var e=n.state.data[0],t=n.state.data[1],a=+e.temperature>=60,r=+t.temperature>=60,o=+e.gas>=15,c=+t.gas>=15,i=+e.timbersaw,l=+t.timbersaw,m=o||a,s=c||r;console.log("node1: ",+e.temperature,+e.gas),console.log({burnNode1:m,burnNode2:s,timbersawNode1:i,timbersawNode2:l}),n.setState({trigger:{burnNode1:m,burnNode2:s,timbersawNode1:i,timbersawNode2:l}})},n.setPlay=function(){return n.setState({trigger:!1})},n.state={ws:null,category:"",data:[{id:"Node1",gas:"",temperature:"",battery:""},{id:"Node2",gas:"",temperature:"",battery:""}],avgDailyData:{category:[],data:[{id:"Node1",avgTemperature:[""],avgGas:[""]},{id:"Node2",avgTemperature:[""],avgGas:[""]}]},trigger:{burnNode1:!1,burnNode2:!1,timbersawNode1:!1,timbersawNode2:!1}},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.connect(),this.handleTrigger()}},{key:"componentDidUpdate",value:function(e,t){t.data[0].gas!==this.state.data[0].gas&&this.handleTrigger()}},{key:"render",value:function(){var e=this.state,t=e.ws,a=e.category,n=e.data,o=e.avgDailyData,c=e.trigger,i=this.props.classes;return r.a.createElement("div",{className:i.root},r.a.createElement(re,{burnNode1:c.burnNode1,burnNode2:c.burnNode2,timbersawNode1:c.timbersawNode1,timbersawNode2:c.timbersawNode2}),r.a.createElement(k.a,{className:i.mainContainer,container:!0,alignItems:"center",justify:"space-evenly"},r.a.createElement(k.a,{item:!0,md:10},r.a.createElement("div",{className:i.root},n.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(k.a,{container:!0,alignItems:"center",justify:"space-evenly"},r.a.createElement("p",{className:"card-title-node"},"Tr\u1ea1ng th\xe1i Tr\u1ea1m "+(t+1)),r.a.createElement(k.a,{container:!0,alignItems:"center"},r.a.createElement(k.a,{md:3,sm:6,xs:12},r.a.createElement(F,{title:"Nhi\u1ec7t \u0111\u1ed9",content:e.temperature,footer:e.temperature>=60?"Nhi\u1ec7t \u0111\u1ed9 \u0111ang b\u1ea5t th\u01b0\u1eddng":"Nhi\u1ec7t \u0111\u1ed9 \u0111ang \u1ed5n \u0111\u1ecbnh",warning:e.temperature>=60,color:"linear-gradient(60deg, #ffa726, #fb8c00)"})),r.a.createElement(k.a,{md:3,sm:6,xs:12},r.a.createElement(F,{title:"N\u1ed3ng \u0111\u1ed9 CO",content:e.gas,footer:e.gas>=60?"N\u1ed3ng \u0111\u1ed9 CO \u0111ang b\u1ea5t th\u01b0\u1eddng":"N\u1ed3ng \u0111\u1ed9 CO \u0111ang \u1ed5n \u0111\u1ecbnh",warning:e.gas>=60,color:"linear-gradient(60deg, #92ABC1, #6C757D)"})),r.a.createElement(k.a,{md:3,sm:6,xs:12},r.a.createElement(F,{title:"Pin",content:e.battery,footer:e.battery<=40?"N\u0103ng l\u01b0\u1ee3ng th\u1ea5p, c\u1ea7n s\u1ea1c":"N\u0103ng l\u01b0\u1ee3ng \u1ed5n \u0111\u1ecbnh",warning:e.battery<=40,color:"linear-gradient(60deg, #26c6da, #00acc1)"})),r.a.createElement(k.a,{md:3,sm:6,xs:12},r.a.createElement(F,{title:"Tr\u1ed9m g\u1ed7",content:e.timbersaw,footer:"1"===e.timbersaw?"Khu r\u1eebng an to\xe0n":"Khu r\u1eebng \u0111ang b\u1ecb \u0111e d\u1ecda",color:"linear-gradient(60deg, #ef5350, #e53935)",status:!0,warning:"0"===e.timbersaw})))))})),r.a.createElement(k.a,{className:"chart-container",container:!0},r.a.createElement(he,{data:n,category:a,title:"Bi\u1ec3u \u0111\u1ed3 hi\u1ec3n th\u1ecb Tr\u1ea1m"}),r.a.createElement(de,{avgDailyData:o,ws:t}))))))}}]),a}(n.Component),fe={margin:"auto",marginBottom:15,marginTop:20,marginLeft:15,marginRight:25,maxWidth:430},he=function(e){var t=e.data,a=e.title,n=e.category;return r.a.createElement(k.a,{container:!0,justify:"space-evenly",alignItems:"center"},t.map((function(e,t){return r.a.createElement(k.a,{key:t,item:!0,xs:10,sm:6,md:5},r.a.createElement("h4",{style:{textAlign:"center"}},"".concat(a," ").concat(t+1)),r.a.createElement(T.a,{elevation:4,style:fe},r.a.createElement(x,{category:n,dataset:e})))})))},be=Object(g.g)(Object(C.a)((function(e){return{root:{flexGrow:1,justifyContent:"center"},paper:{margin:"auto",marginBottom:15,marginTop:20,maxWidth:430},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},mainContainer:{marginTop:56}}}))(pe)),ve=a(60),Ee=a.n(ve),ye=a(91),Ne=a(198),we=a(195),Oe=a(196),je=a(193),Se=a(197),xe=a(92),ke=a.n(xe),Te=a(194),Ce=a(189),De=a(190),Be=a(192),We=a(191);function Ge(e){var t=e.open;return r.a.createElement(Ce.a,{"aria-labelledby":"simple-dialog-title",open:t},r.a.createElement(De.a,null,"Th\xf4ng tin \u0111\u0103ng nh\u1eadp sai"),r.a.createElement(We.a,null,r.a.createElement(Be.a,null,"Sai t\xe0i kho\u1ea3n ho\u1eb7c m\u1eadt kh\u1ea9u. Vui l\xf2ng th\u1eed l\u1ea1i!")))}function Ie(){return r.a.createElement(V.a,{variant:"body2",color:"textSecondary",align:"center",style:{marginBottom:27}},"Copyright \xa9 ",r.a.createElement(je.a,{color:"inherit",href:"https://material-ui.com/"},"End Game HCMUTE")," ",(new Date).getFullYear(),".")}var Le=Object(U.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var Ae=Object(g.g)((function(e){var t=Le(),a=Object(n.useState)(""),o=Object(p.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(""),m=Object(p.a)(l,2),s=m[0],u=m[1],g=Object(n.useState)(!1),d=Object(p.a)(g,2),f=d[0],h=d[1],b=function(e){e.persist(),"email"===e.target.name?i(e.target.value):u(e.target.value)},v=function(){throw new Error("dm sai pass roi`")},E=function(){var e=Object(ye.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{"admin"===c&&"admin"===s?y("/app"):v(),"okdone",O("okdone")}catch(a){h(!0),setTimeout((function(){return h(!1)}),3e3)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(t){return e.history.push(t)};return r.a.createElement(Te.a,{component:"main",maxWidth:"xs",className:"signin-container"},r.a.createElement(we.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(Ne.a,{className:t.avatar},r.a.createElement(ke.a,null)),r.a.createElement(V.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:E},r.a.createElement(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:b}),r.a.createElement(Oe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:b}),r.a.createElement(_.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"),r.a.createElement(Se.a,{mt:8},r.a.createElement(Ie,null)))),r.a.createElement(Ge,{open:f}))})),Re=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return r.a.createElement(g.b,Object.assign({},a,{render:function(e){return null!==j()?r.a.createElement(t,e):r.a.createElement(g.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ze=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return r.a.createElement(g.b,Object.assign({},a,{render:function(e){return null===j()?r.a.createElement(t,e):r.a.createElement(g.a,{to:{pathname:"/app",state:{from:e.location}}})}}))},Je=function(e){Object(m.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement(g.d,null,r.a.createElement(ze,{component:Ae,exact:!0,path:"/"}),r.a.createElement(Re,{component:be,path:"/app"})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.ec74e0ec.chunk.js.map